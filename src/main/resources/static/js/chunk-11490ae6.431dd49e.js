(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-11490ae6"],{"24b3":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"info-table"}},[e._m(0),a("div",{attrs:{id:"function-bar"}},[a("div",{attrs:{id:"operation-bar"}},[a("button",{staticClass:"btn btn-success",on:{click:e.getAllResidentInfo}},[e._v("全部员工")]),a("button",{staticClass:"btn btn-primary",attrs:{"data-toggle":"modal","data-target":"#addResidentModal"}},[e._v("新增员工")])]),a("form",{staticClass:"form-inline my-2 my-lg-0",attrs:{id:"search-bar"},on:{submit:e.searchResident}},[a("label",{staticStyle:{"padding-right":"15px"},attrs:{for:"search-input"}},[e._v("搜索住户:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.searchInput,expression:"searchInput"}],staticClass:"form-control mr-sm-2",attrs:{id:"search-input",type:"search",placeholder:"输入ID、姓名","aria-label":"Search",required:""},domProps:{value:e.searchInput},on:{input:function(t){t.target.composing||(e.searchInput=t.target.value)}}}),a("button",{staticClass:"btn btn-success my-2 my-sm-0",attrs:{type:"submit"}},[e._v("搜索")])])]),a("table",{staticClass:"table table-hover table-responsive-lg"},[e._m(1),a("tbody",e._l(e.residents,function(t,s){return a("tr",{attrs:{id:"main-table-tr","data-toggle":"tooltip",title:"点击查看详情"},on:{click:function(t){return e.getDetail(s)}}},[a("th",{attrs:{scope:"row"}},[e._v(e._s(s+1))]),e._l(t,function(t){return a("td",[e._v("\n        "+e._s(t)+"\n      ")])})],2)}),0)]),a("div",{staticClass:"modal fade",attrs:{id:"infoModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-xl",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[e._m(2),a("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"modal-body",staticStyle:{"text-align":"center"}},[e._v("\n          "+e._s(e.loadingStatus)+"\n        ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],staticClass:"modal-body",staticStyle:{"text-align":"center"}},[a("table",{staticClass:"table table-bordered"},[a("tbody",[a("tr",[a("th",{attrs:{scope:"row"}},[e._v("ID:")]),a("td",[e._v(e._s(e.residentDetail.id))]),a("th",{attrs:{scope:"row"}},[e._v("姓名")]),a("td",[e._v(e._s(e.residentDetail.name))]),a("th",{attrs:{scope:"row"}},[e._v("性别")]),a("td",[e._v(e._s(e.residentDetail.sex))]),a("th",{attrs:{scope:"row"}},[e._v("出生年月")]),a("td",[e._v(e._s(e.residentDetail.dob))]),a("td",{attrs:{rowspan:"3"}},[a("img",{staticStyle:{width:"100px"},attrs:{src:e.residentDetail.photoUrl,alt:"照片"}})])]),a("tr",[a("th",{attrs:{scope:"row"}},[e._v("床号")]),a("td",[e._v(e._s(e.residentDetail.bed))]),a("th",{attrs:{scope:"row"}},[e._v("身份证号")]),a("td",[e._v(e._s(e.residentDetail.goverId))]),a("th",{attrs:{scope:"row"}},[e._v("电话")]),a("td",[e._v(e._s(e.residentDetail.phone))]),a("th",{attrs:{scope:"row"}},[e._v("邮箱")]),a("td",[e._v(e._s(e.residentDetail.email))])]),a("tr",[a("th",{attrs:{scope:"row"}},[e._v("家庭住址")]),a("td",{attrs:{colspan:"7"}},[e._v(e._s(e.residentDetail.address))])]),a("tr",[a("th",{attrs:{scope:"row"}},[e._v("联系人")]),a("td",[e._v(e._s(e.residentDetail.egName))]),a("th",{attrs:{scope:"row"}},[e._v("联系电话")]),a("td",[e._v(e._s(e.residentDetail.egPhone))]),a("th",{attrs:{scope:"row"}},[e._v("入院日期")]),a("td",[e._v(e._s(e.residentDetail.moveInDate))]),a("th",{attrs:{scope:"row"}},[e._v("离院日期")]),a("td",{attrs:{colspan:"2"}},[e._v(e._s(e.residentDetail.moveOutDate))])]),e._m(3),a("tr",[a("td",{attrs:{colspan:"9",id:"medical-text"}},[e._v(e._s(e.residentDetail.medicalHistory))])])])])]),e._m(4)])])]),a("div",{staticClass:"modal fade",attrs:{id:"addResidentModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-xl",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[e._m(5),a("div",{staticClass:"modal-body"},[a("form",{on:{submit:e.submitNewRes,reset:e.onReset}},[e._m(6),a("div",{attrs:{id:"newResInfo"}},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-3"},[a("label",{attrs:{for:"newResName"}},[e._v("姓名")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.newResident.name,expression:"newResident.name"}],staticClass:"form-control",class:{"is-invalid":e.formFormat.name},attrs:{type:"text",id:"newResName",placeholder:"姓名",required:""},domProps:{value:e.newResident.name},on:{input:function(t){t.target.composing||e.$set(e.newResident,"name",t.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[e._v("\n                    名字长度不可超过10字符\n                  ")])]),a("div",{staticClass:"form-group col-3"},[a("label",{attrs:{for:"newResSex"}},[e._v("性别")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.newResident.sex,expression:"newResident.sex"}],staticClass:"form-control",class:{"is-invalid":e.formFormat.sex},attrs:{id:"newResSex",required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.newResident,"sex",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"",selected:""}},[e._v("选择")]),a("option",{attrs:{value:"MALE"}},[e._v("男")]),a("option",{attrs:{value:"FEMALE"}},[e._v("女")])]),a("div",{staticClass:"invalid-feedback"},[e._v("\n                    请选择性别\n                  ")])]),a("div",{staticClass:"form-group col-3"},[a("label",{attrs:{for:"newResDob"}},[e._v("出生年月")]),a("datepicker",{attrs:{id:"newResDob",format:"yyyy-MM-dd",language:e.language.zh,placeholder:"选择日期",required:!0,"clear-button":!0,"bootstrap-styling":!0,typeable:!0,"input-class":{"is-invalid":e.formFormat.dob}},model:{value:e.newResident.dob,callback:function(t){e.$set(e.newResident,"dob",t)},expression:"newResident.dob"}})],1),a("div",{staticClass:"form-group col-3"},[a("label",{attrs:{for:"newResBed"}},[e._v("床号")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.newResident.bed,expression:"newResident.bed"}],staticClass:"form-control",class:{"is-invalid":e.formFormat.bed},attrs:{type:"text",id:"newResBed",placeholder:"床号",required:""},domProps:{value:e.newResident.bed},on:{input:function(t){t.target.composing||e.$set(e.newResident,"bed",t.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[e._v("\n                    床号格式不正确\n                  ")])])]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-3"},[a("label",{attrs:{for:"newResGovId"}},[e._v("身份证号码")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.newResident.goverId,expression:"newResident.goverId"}],staticClass:"form-control",class:{"is-invalid":e.formFormat.goverId},attrs:{type:"text",id:"newResGovId",placeholder:"身份证号码",required:""},domProps:{value:e.newResident.goverId},on:{input:function(t){t.target.composing||e.$set(e.newResident,"goverId",t.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[e._v("\n                    身份证号码应为18位数字\n                  ")])]),a("div",{staticClass:"form-group col-3"},[a("label",{attrs:{for:"newResPhone"}},[e._v("电话")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.newResident.phone,expression:"newResident.phone"}],staticClass:"form-control",class:{"is-invalid":e.formFormat.phone},attrs:{type:"text",id:"newResPhone",placeholder:"电话号码"},domProps:{value:e.newResident.phone},on:{input:function(t){t.target.composing||e.$set(e.newResident,"phone",t.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[e._v("\n                    电话号码应为座机或11位手机号\n                  ")])]),a("div",{staticClass:"form-group col-3"},[a("label",{attrs:{for:"newResEmail"}},[e._v("邮箱")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.newResident.email,expression:"newResident.email"}],staticClass:"form-control",class:{"is-invalid":e.formFormat.email},attrs:{type:"email",id:"newResEmail",placeholder:"邮箱"},domProps:{value:e.newResident.email},on:{input:function(t){t.target.composing||e.$set(e.newResident,"email",t.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[e._v("\n                    邮箱格式不正确\n                  ")])]),a("div",{staticClass:"form-group col-3"},[a("label",{attrs:{for:"newResMoveInDate"}},[e._v("入住日期")]),a("datepicker",{attrs:{id:"newResMoveInDate",format:"yyyy-MM-dd",language:e.language.zh,placeholder:"选择日期",required:!0,"clear-button":!0,"bootstrap-styling":!0,typeable:!0,"input-class":{"is-invalid":e.formFormat.moveInDate}},model:{value:e.newResident.moveInDate,callback:function(t){e.$set(e.newResident,"moveInDate",t)},expression:"newResident.moveInDate"}})],1)]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-12"},[a("label",{attrs:{for:"newResAddress"}},[e._v("家庭地址")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.newResident.address,expression:"newResident.address"}],staticClass:"form-control",class:{"is-invalid":e.formFormat.address},attrs:{type:"text",id:"newResAddress",placeholder:"家庭地址",required:""},domProps:{value:e.newResident.address},on:{input:function(t){t.target.composing||e.$set(e.newResident,"address",t.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[e._v("\n                    家庭地址长度不可超过100个字符\n                  ")])])]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-12"},[a("label",{attrs:{for:"newResMedicalHis"}},[e._v("既往病史")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.newResident.medicalHistory,expression:"newResident.medicalHistory"}],staticClass:"form-control",class:{"is-invalid":e.formFormat.medicalHistory},attrs:{type:"text",id:"newResMedicalHis",placeholder:"病史",required:""},domProps:{value:e.newResident.medicalHistory},on:{input:function(t){t.target.composing||e.$set(e.newResident,"medicalHistory",t.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[e._v("\n                    既往病史记录不可超过100个字符\n                  ")])])]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-12"},[a("label",{attrs:{for:"newResPhoto"}},[e._v("添加照片")]),a("input",{attrs:{type:"file",id:"newResPhoto",required:""},on:{change:e.getFile}})])])]),e._m(7),a("div",{attrs:{id:"newResFamily"}},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-4"},[a("label",{attrs:{for:"newResFamName"}},[e._v("姓名")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.newResident.famName,expression:"newResident.famName"}],staticClass:"form-control",class:{"is-invalid":e.formFormat.famName},attrs:{type:"text",id:"newResFamName",placeholder:"姓名",required:""},domProps:{value:e.newResident.famName},on:{input:function(t){t.target.composing||e.$set(e.newResident,"famName",t.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[e._v("\n                    姓名不可超过10个字符\n                  ")])]),a("div",{staticClass:"form-group col-4"},[a("label",{attrs:{for:"newResFamPhone"}},[e._v("电话")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.newResident.famPhone,expression:"newResident.famPhone"}],staticClass:"form-control",class:{"is-invalid":e.formFormat.famPhone},attrs:{type:"text",id:"newResFamPhone",placeholder:"电话",required:""},domProps:{value:e.newResident.famPhone},on:{input:function(t){t.target.composing||e.$set(e.newResident,"famPhone",t.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[e._v("\n                    电话号码应为座机或11位手机号\n                  ")])]),a("div",{staticClass:"form-group col-4"},[a("label",{attrs:{for:"newResFamEmail"}},[e._v("邮箱")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.newResident.famEmail,expression:"newResident.famEmail"}],staticClass:"form-control",class:{"is-invalid":e.formFormat.famEmail},attrs:{type:"email",id:"newResFamEmail",placeholder:"邮箱"},domProps:{value:e.newResident.famEmail},on:{input:function(t){t.target.composing||e.$set(e.newResident,"famEmail",t.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[e._v("\n                    邮箱格式不正确\n                  ")])])]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-12"},[a("label",{attrs:{for:"newResFamAddress"}},[e._v("常用地址")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.newResident.famAddress,expression:"newResident.famAddress"}],staticClass:"form-control",class:{"is-invalid":e.formFormat.famAddress},attrs:{type:"text",id:"newResFamAddress",placeholder:"地址",required:""},domProps:{value:e.newResident.famAddress},on:{input:function(t){t.target.composing||e.$set(e.newResident,"famAddress",t.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[e._v("\n                    地址长度不可超过100个字符\n                  ")])])])]),a("div",[a("button",{staticClass:"btn btn-primary",class:{disabled:e.hasClicked},attrs:{type:"submit"}},[e._v("提交")]),a("button",{staticClass:"btn btn-danger",class:{disabled:e.hasClicked},attrs:{type:"reset"}},[e._v("重置")]),a("div",{staticClass:"status-info"},[e._v(e._s(e.uploadStatus))])])]),a("b-alert",{attrs:{show:e.dismissCountDown,dismissible:"",fade:"",variant:"success"},on:{dismissed:function(t){e.dismissCountDown=0},"dismiss-count-down":e.countDownChanged}},[e._v("\n            添加成功！窗口将在 "+e._s(e.dismissCountDown)+" 秒后关闭...\n          ")])],1),e._m(8)])])]),a("div",{staticClass:"modal fade",attrs:{id:"loginModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-md",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[e._m(9),a("div",{staticClass:"modal-body",attrs:{id:"loginModalBody"}},[a("LoginModal")],1)])])])])},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"panel-title"}},[a("h5",[a("strong",[e._v("基本信息")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[e._v("#")]),a("th",{attrs:{scope:"col"}},[e._v("ID")]),a("th",{attrs:{scope:"col"}},[e._v("姓名")]),a("th",{attrs:{scope:"col"}},[e._v("性别")]),a("th",{attrs:{scope:"col"}},[e._v("出生年月")]),a("th",{attrs:{scope:"col"}},[e._v("床号")]),a("th",{attrs:{scope:"col"}},[e._v("电话")]),a("th",{attrs:{scope:"col"}},[e._v("紧急联系人")]),a("th",{attrs:{scope:"col"}},[e._v("紧急联系电话")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"infoModalLabel"}},[e._v("详细信息")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("tr",[a("th",{attrs:{scope:"row",colspan:"9"}},[e._v("既往病史")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[e._v("关闭")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"addResidentModalLabel"}},[e._v("添加住户")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{attrs:{for:"newResInfo"}},[a("strong",[e._v("住户信息")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{attrs:{for:"newResFamily"}},[a("strong",[e._v("家属信息")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[e._v("关闭")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"loginModalLabel"}},[e._v("会话超时")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])])}],n=(a("6b54"),a("7f7f"),a("1157")),o=a.n(n),d=a("4ed9"),r=a("ac5c"),l=a.n(r),m=a("ee9b"),c={name:"staffInfo",components:{Datepicker:l.a,LoginModal:d["a"]},data:function(){return{residents:[],residentDetail:{},newResident:{name:"",sex:"",dob:"",bed:"",goverId:"",phone:"",email:"",address:"",medicalHistory:"",photo:"",moveInDate:"",famName:"",famPhone:"",famEmail:"",famAddress:""},formFormat:{name:!1,sex:!1,dob:!1,bed:!1,goverId:!1,phone:!1,email:!1,address:!1,medicalHistory:!1,photo:!1,moveInDate:!1,famName:!1,famPhone:!1,famEmail:!1,famAddress:!1},loading:!0,loadingStatus:"加载中...",uploadStatus:"",dismissSecs:3,dismissCountDown:0,showDismissibleAlert:!1,hasClicked:!1,language:m,searchInput:""}},computed:{isOnline:function(){return this.$store.getters.getOnline}},watch:{isOnline:function(){this.$store.getters.getOnline&&(o()("#loginModal").modal("hide"),this.getAllResidentInfo())},dismissCountDown:function(){0===this.dismissCountDown&&o()("#addResidentModal").modal("hide")}},methods:{getAllResidentInfo:function(){var e=this;this.checkSession().then(function(t){t?e.axios.get(e.getAPI()+"/resident/baseInfo").then(function(t){e.residents=[];for(var a=0;a<t.data.length;a++){var s={id:t.data[a].resId,name:t.data[a].name,sex:e.sexCheck(t.data[a].sex),dob:e.dateTrim(t.data[a].dob),bed:t.data[a].numOfBed,phone:t.data[a].phone,egName:t.data[a].famName,egPhone:t.data[a].famPhone};e.residents.push(s)}},function(e){console.log("Get Failed"),console.log(e.data)}):o()("#loginModal").modal("show")})},getDetail:function(e){var t=this;this.checkSession().then(function(a){if(a){o()("#infoModal").modal("show");var s={resId:t.residents[e].id};t.axios.post(t.getAPI()+"/resident/detailInfo",s,{timeout:15e3}).then(function(e){t.residentDetail={id:e.data.resId,name:e.data.name,sex:t.sexCheck(e.data.sex),dob:t.dateTrim(e.data.dob),bed:e.data.numOfBed,phone:e.data.phone,egName:e.data.famName,egPhone:e.data.famPhone,address:e.data.address,email:e.data.email,goverId:e.data.goverId,medicalHistory:e.data.medicalHistory,moveInDate:t.dateTrim(e.data.moveInDate),moveOutDate:t.dateTrim(e.data.moveOutDate),photoUrl:e.data.photoUrl},t.loadingStatus="加载完成",t.loading=!1},function(e){"ECONNABORTED"===e.code&&-1!==e.toString().indexOf("timeout")?t.loadingStatus="加载超时，请重试":(console.log("post failed"),console.log(e))})}else o()("#loginModal").modal("show")})},sexCheck:function(e){return"MALE"===e?"男":"FEMALE"===e?"女":"N/A"},dateTrim:function(e){return this.$moment(e).format("YYYY-MM-DD")},getFile:function(e){this.newResident.photo=e.target.files[0],"image"!==this.newResident.photo.type.substring(0,5)?(alert("文件格式不正确，请重新选取"),this.newResident.photo="",o()(e.target).val("")):this.newResident.photo.size>512e3&&(alert("图像大于500k,请重新选取"),this.newResident.photo="",o()(e.target).val(""))},checkFormat:function(){this.formFormat.name=this.newResident.name.length>10,this.formFormat.famName=this.newResident.famName.length>10,this.formFormat.sex=0===this.newResident.sex.length,this.formFormat.dob="Invalid date"===this.dateTrim(this.newResident.dob),this.formFormat.moveInDate="Invalid date"===this.dateTrim(this.newResident.moveInDate);var e=/^[0-9]{1,5}$/;this.formFormat.bed=!e.test(this.newResident.bed);var t=/(^\d{18}$)|(^\d{17}(\d|X|x)$)/;this.formFormat.goverId=!t.test(this.newResident.goverId);var a=/((\d{11})|^((\d{7,8})|(\d{4}|\d{3})-(\d{7,8})|(\d{4}|\d{3})-(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1})|(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1}))$)/;0===this.newResident.phone.length?this.formFormat.phone=!1:this.formFormat.phone=!a.test(this.newResident.phone),this.formFormat.famPhone=!a.test(this.newResident.famPhone);var s=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;return 0===this.newResident.email.length?this.formFormat.email=!1:this.formFormat.email=!s.test(this.newResident.email),0===this.newResident.famEmail.length?this.formFormat.famEmail=!1:this.formFormat.famEmail=!s.test(this.newResident.famEmail),this.formFormat.address=this.newResident.address.length>100,this.formFormat.famAddress=this.newResident.famAddress.length>100,this.formFormat.medicalHistory=this.newResident.medicalHistory.length>100,this.formFormat.name||this.formFormat.sex||this.formFormat.dob||this.formFormat.bed||this.formFormat.goverId||this.formFormat.phone||this.formFormat.email||this.formFormat.address||this.formFormat.medicalHistory||this.formFormat.moveInDate||this.formFormat.famName||this.formFormat.famPhone||this.formFormat.famEmail||this.formFormat.famAddress},submitNewRes:function(e){var t=this;e.preventDefault(),this.hasClicked||this.checkFormat()||(this.hasClicked=!0,this.checkSession().then(function(e){if(e){var a=new FormData;a.append("photo",t.newResident.photo);var s={name:t.newResident.name,sex:t.newResident.sex,dob:t.dateTrim(t.newResident.dob),bed:t.newResident.bed,goverId:t.newResident.goverId,phone:t.newResident.phone,email:t.newResident.email,address:t.newResident.address,medicalHistory:t.newResident.medicalHistory,moveInDate:t.dateTrim(t.newResident.moveInDate),famName:t.newResident.famName,famPhone:t.newResident.famPhone,famEmail:t.newResident.famEmail,famAddress:t.newResident.famAddress};a.append("goverId",t.newResident.goverId),t.uploadStatus="正在上传资料...",t.axios.post(t.getAPI()+"/resident/add-resident",s).then(function(e){100===e.data?(t.uploadStatus="正在上传照片...",t.axios.post(t.getAPI()+"/resident/upload-photo",a).then(function(e){console.log(e.data),100===e.data?(t.uploadStatus="",t.newResident={},t.showAlert(),t.hasClicked=!1,t.getAllResidentInfo()):200===e.data?(t.uploadStatus="上传失败请重试",t.hasClicked=!1):-999===e.data&&(t.uploadStatus="服务器错误，请稍后尝试",t.hasClicked=!1)},function(e){console.log("post photo failed"),console.log(e.data)})):200===e.data?(t.uploadStatus="上传失败请重试",t.hasClicked=!1):-999===e.data&&(t.uploadStatus="服务器错误，请稍后尝试",t.hasClicked=!1)},function(e){console.log("post info failed"),console.log(e.data)})}else t.hasClicked=!1,o()("#loginModal").modal("show")}))},onReset:function(e){e.preventDefault(),this.hasClicked||(this.uploadStatus="",this.newResident.name="",this.newResident.sex="",this.newResident.dob="",this.newResident.bed="",this.newResident.goverId="",this.newResident.phone="",this.newResident.email="",this.newResident.address="",this.newResident.photo="",this.newResident.medicalHistory="",this.newResident.moveInDate="",this.newResident.famName="",this.newResident.famPhone="",this.newResident.famEmail="",this.newResident.famAddress="",o()("#newResPhoto").val(""))},countDownChanged:function(e){this.dismissCountDown=e},showAlert:function(){this.dismissCountDown=this.dismissSecs},searchResident:function(e){var t=this;e.preventDefault(),this.checkSession().then(function(e){if(e){var a={search:t.searchInput};t.axios.post(t.getAPI()+"/resident/search",a).then(function(e){t.residents=[];for(var a=0;a<e.data.length;a++){var s={id:e.data[a].resId,name:e.data[a].name,sex:t.sexCheck(e.data[a].sex),dob:t.dateTrim(e.data[a].dob),bed:e.data[a].numOfBed,phone:e.data[a].phone,egName:e.data[a].famName,egPhone:e.data[a].famPhone};t.residents.push(s)}},function(e){console.log("search post failed"),console.log(e.data)})}else o()("#loginModal").modal("show")})}},beforeMount:function(){this.getAllResidentInfo()}},v=c,h=(a("a0a0"),a("2877")),f=Object(h["a"])(v,s,i,!1,null,"4c59d128",null);t["default"]=f.exports},"88c1":function(e,t,a){},a0a0:function(e,t,a){"use strict";var s=a("88c1"),i=a.n(s);i.a}}]);
//# sourceMappingURL=chunk-11490ae6.431dd49e.js.map