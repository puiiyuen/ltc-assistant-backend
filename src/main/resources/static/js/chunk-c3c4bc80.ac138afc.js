(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c3c4bc80"],{"0758":function(t,s,e){},2673:function(t,s,e){"use strict";var a=e("0758"),i=e.n(a);i.a},"4ed9":function(t,s,e){"use strict";var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{attrs:{id:"loginFrame"}},[t._m(0),e("div",{attrs:{id:"login"}},[t.show?e("b-form",{on:{submit:t.onSubmit,reset:t.onReset}},[e("b-form-group",{attrs:{id:"userId",label:"ID:","label-for":"userIdInput"}},[e("b-form-input",{attrs:{id:"userIdInput",type:"text",required:"",placeholder:"输入ID"},model:{value:t.form.userId,callback:function(s){t.$set(t.form,"userId",s)},expression:"form.userId"}})],1),e("b-form-group",{attrs:{id:"password",label:"密码:","label-for":"passwordInput"}},[e("b-form-input",{attrs:{id:"passwordInput",type:"password",required:"",placeholder:"输入密码"},model:{value:t.form.password,callback:function(s){t.$set(t.form,"password",s)},expression:"form.password"}})],1),e("div",{attrs:{id:"loginStatus"}},[e("span",[t._v(t._s(t.loginStatus))])]),e("b-button",{staticClass:"sub-btn",class:{disabled:t.hasClicked},attrs:{type:"submit",variant:"primary",size:"md"}},[t._v("登陆\n        ")]),e("b-button",{staticClass:"sub-btn",class:{disabled:t.hasClicked},attrs:{type:"reset",variant:"danger",size:"md"}},[t._v("重置\n        ")])],1):t._e()],1)])])},i=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"title"}},[e("h3",[t._v("用户登录")])])}],n=e("f499"),o=e.n(n),r=(e("6b54"),e("96cf"),e("3b8d")),c=e("c0d6"),l={data:function(){return{form:{userId:"",password:""},loginStatus:"",show:!0,hasClicked:!1}},methods:{onSubmit:function(t){var s=this;if(t.preventDefault(),!this.hasClicked){var e=/[0-9]+/;e.test(this.form.userId)?(this.hasClicked=!0,this.loginStatus="登陆中...",this.login().then(function(t){100===t?(s.loginStatus="登陆成功",s.fetchData(),s.form.userId="",s.form.password="",s.loginStatus="",s.hasClicked=!1):500===t?(s.loginStatus="账户尚未激活",s.hasClicked=!1,s.$router.push({name:"activate"})):210===t?(s.loginStatus="请求超时，请重试",s.hasClicked=!1):-999===t?(s.loginStatus="服务器开小差了，请重试",s.hasClicked=!1):(s.loginStatus="ID或密码不正确",s.hasClicked=!1)})):this.loginStatus="ID必须为数字"}},onReset:function(t){var s=this;t.preventDefault(),this.hasClicked||(this.form.userId="",this.form.password="",this.loginStatus="",this.show=!1,this.$nextTick(function(){s.show=!0}))},login:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var s,e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return s={userId:this.form.userId,password:this.form.password,platform:"CONSOLE"},e=200,t.next=4,this.axios.post(this.getAPI()+"/login",s,{timeout:15e3}).then(function(t){console.log(t.data),e=t.data},function(t){"ECONNABORTED"===t.code&&-1!==t.toString().indexOf("timeout")?e=210:(console.log("post failed"),console.log(t))});case 4:return t.abrupt("return",e);case 5:case"end":return t.stop()}},t,this)}));function s(){return t.apply(this,arguments)}return s}(),fetchData:function(){this.axios.get(this.getAPI()+"/user").then(function(t){localStorage.setItem("user",o()(t.data)),c["a"].commit("setUser")},function(t){console.log("post failed"),console.log(t)})}}},d=l,u=(e("2673"),e("2877")),m=Object(u["a"])(d,a,i,!1,null,"2f9c4756",null);s["a"]=m.exports},"7f7f":function(t,s,e){var a=e("86cc").f,i=Function.prototype,n=/^\s*function ([^ (]*)/,o="name";o in i||e("9e1e")&&a(i,o,{configurable:!0,get:function(){try{return(""+this).match(n)[1]}catch(t){return""}}})},9545:function(t,s,e){"use strict";var a=e("c3cf"),i=e.n(a);i.a},a89b:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[t._m(0),t._m(1),e("div",{attrs:{id:"pending-incident"}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-11"},[e("table",{staticClass:"table table-hover table-responsive-lg"},[t._m(2),e("tbody",[0===t.pendingList.length?e("tr",[e("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"6"}},[t._v("暂无待处理事件")])]):t._e(),t._l(t.pendingList,function(s,a){return e("tr",[e("th",{attrs:{scope:"row"}},[t._v(t._s(a+1))]),e("td",[t._v(t._s(s.name))]),e("td",[t._v(t._s(s.type))]),e("td",[t._v(t._s(s.processStatus))]),e("td",[t._v(t._s(s.recordTime))]),e("td",[e("button",{staticClass:"btn btn-info btn-sm",on:{click:function(s){return t.showDetail(1,a)}}},[t._v("详情")]),e("button",{staticClass:"btn btn-primary btn-sm",on:{click:function(e){return t.toProcessOn(s.incidentId,a)}}},[t._v("处理")]),e("button",{staticClass:"btn btn-danger btn-sm",on:{click:function(e){return t.toIgnoreOn(s.incidentId,a)}}},[t._v("忽略")])])])})],2)])]),e("div",{staticClass:"col-1"})])]),t._m(3),e("div",{attrs:{id:"processing-incident"}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-11"},[e("table",{staticClass:"table table-hover table-responsive-lg"},[t._m(4),e("tbody",[0===t.processingList.length?e("tr",[e("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"7"}},[t._v("暂无正在处理事件")])]):t._e(),t._l(t.processingList,function(s,a){return e("tr",[e("th",{attrs:{scope:"row"}},[t._v(t._s(a+1))]),e("td",[t._v(t._s(s.name))]),e("td",[t._v(t._s(s.type))]),e("td",[t._v(t._s(s.processStatus))]),e("td",[t._v(t._s(s.recordTime))]),e("td",[t._v(t._s(s.processTime))]),e("td",[e("button",{staticClass:"btn btn-info btn-sm",on:{click:function(s){return t.showDetail(2,a)}}},[t._v("详情")]),e("button",{staticClass:"btn btn-primary btn-sm",on:{click:function(e){return t.toFinishOn(s.incidentId,a)}}},[t._v("完成")])])])})],2)])]),e("div",{staticClass:"col-1"})])]),t._m(5),e("div",{attrs:{id:"finished-incident"}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-11"},[e("table",{staticClass:"table table-hover table-responsive-lg"},[t._m(6),e("tbody",[0===t.finishedList.length?e("tr",[e("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"7"}},[t._v("暂无已完成事件")])]):t._e(),t._l(t.finishedList,function(s,a){return e("tr",[e("th",{attrs:{scope:"row"}},[t._v(t._s(a+1))]),e("td",[t._v(t._s(s.name))]),e("td",[t._v(t._s(s.type))]),e("td",[t._v(t._s(s.processStatus))]),e("td",[t._v(t._s(s.recordTime))]),e("td",[t._v(t._s(s.finishTime))]),e("td",[e("button",{staticClass:"btn btn-info btn-sm",on:{click:function(s){return t.showDetail(3,a)}}},[t._v("详情")])])])})],2)])]),e("div",{staticClass:"col-1"})])]),e("div",{staticClass:"modal fade",attrs:{id:"incidentDetailModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[t._m(7),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("table",{staticClass:"table table-bordered"},[e("tbody",[e("tr",[e("th",{attrs:{scope:"row"}},[t._v("事件ID")]),e("td",[t._v(t._s(t.incidentDetail.incidentId))]),e("th",{attrs:{scope:"row"}},[t._v("住户")]),e("td",[t._v(t._s(t.incidentDetail.name))]),e("th",{attrs:{scope:"row"}},[t._v("事件类型")]),e("td",[t._v(t._s(t.incidentDetail.type))]),e("th",{attrs:{scope:"row"}},[t._v("创建时间")]),e("td",[t._v(t._s(t.incidentDetail.recordTime))])]),e("tr",[e("th",{attrs:{scope:"row"}},[t._v("状态")]),e("td",[t._v(t._s(t.incidentDetail.processStatus))]),e("th",{attrs:{scope:"row"}},[t._v("处理人员ID")]),e("td",[t._v(t._s(t.incidentDetail.staffId))]),e("th",{attrs:{scope:"row"}},[t._v("处理时间")]),e("td",[t._v(t._s(t.incidentDetail.processTime))]),e("th",{attrs:{scope:"row"}},[t._v("完成时间")]),e("td",[t._v(t._s(t.incidentDetail.finishTime))])]),e("tr",[e("th",{attrs:{scope:"row"}},[t._v("备注")]),e("td",{attrs:{colspan:"7"}},[t._v(t._s(t.incidentDetail.comment))])])])])])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("label",{attrs:{for:"last-location"}},[t._v("位置")]),e("div",{staticClass:"amap-wrapper",attrs:{id:"last-location"}},[e("el-amap",{attrs:{vid:"amap-geo-fence",plugin:t.mapView.plugin,center:t.mapView.mapCenter,zoom:t.mapView.zoom}},t._l(t.mapView.markers,function(t){return e("el-amap-marker",{attrs:{position:t}})}),1)],1)])])]),t._m(8)])])]),e("div",{staticClass:"modal fade",attrs:{id:"freeStaffModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"freeStaffModalLabel"}},[t._v("处理事件")]),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:t.toProcessOff}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"modal-body",staticStyle:{"text-align":"center"}},[t._v("\n          加载中...\n        ")]),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],staticClass:"modal-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("table",{staticClass:"table table-hover table-responsive-lg"},[t._m(9),e("tbody",[0===t.freeStaff.length?e("tr",[e("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"6"}},[t._v("暂无空闲员工")])]):t._e(),t._l(t.freeStaff,function(s,a){return e("tr",[e("th",{attrs:{scope:"row"}},[t._v(t._s(a+1))]),t._l(s,function(s){return e("td",[t._v("\n                   "+t._s(s)+"\n                 ")])}),e("td",[e("button",{staticClass:"btn btn-primary btn-sm",on:{click:function(e){return t.submitProcess(s.id,1)}}},[t._v("安排处理")])])],2)})],2)])])])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.toProcessOff}},[t._v("关闭")])])])])]),e("div",{staticClass:"modal",attrs:{tabindex:"-1",role:"dialog",id:"finishConfirmModal"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered modal-lg",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[t._m(10),e("div",{staticClass:"modal-body"},[e("p",[t._v("确认完成事件处理？该操作不可恢复")]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("label",{attrs:{for:"finished-comment"}},[t._v("备注：")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],staticClass:"form-control",attrs:{id:"finished-comment","aria-label":"With textarea"},domProps:{value:t.comment},on:{input:function(s){s.target.composing||(t.comment=s.target.value)}}})])])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-danger",class:{disabled:t.hasClicked},attrs:{type:"button"},on:{click:function(s){return t.submitProcess(t.processingList[t.currentIndex].staffId,2)}}},[t._v("确定")]),e("button",{staticClass:"btn btn-secondary",class:{disabled:t.hasClicked},attrs:{type:"button"},on:{click:t.toFinishOff}},[t._v("取消")])])])])]),e("div",{staticClass:"modal",attrs:{tabindex:"-1",role:"dialog",id:"ignoreConfirmModal"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered modal-sm",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[t._m(11),t._m(12),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-danger",class:{disabled:t.hasClicked},attrs:{type:"button"},on:{click:function(s){return t.submitProcess(-1,3)}}},[t._v("确定")]),e("button",{staticClass:"btn btn-secondary",class:{disabled:t.hasClicked},attrs:{type:"button"},on:{click:t.toIgnoreOff}},[t._v("取消")])])])])]),e("div",{staticClass:"modal fade",attrs:{id:"loginModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered modal-md",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[t._m(13),e("div",{staticClass:"modal-body",attrs:{id:"loginModalBody"}},[e("LoginModal")],1)])])])])},i=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("div",{attrs:{id:"panel-title"}},[e("h4",[e("strong",[t._v("事件处理")])])])])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("label",{attrs:{for:"pending-incident"}},[e("strong",[t._v("待处理")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("thead",[e("tr",[e("th",{attrs:{scope:"col"}},[t._v("#")]),e("th",{attrs:{scope:"col"}},[t._v("住户")]),e("th",{attrs:{scope:"col"}},[t._v("事件类型")]),e("th",{attrs:{scope:"col"}},[t._v("状态")]),e("th",{attrs:{scope:"col"}},[t._v("创建时间")]),e("th",{attrs:{scope:"col"}},[t._v("操作")])])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("label",{attrs:{for:"processing-incident"}},[e("strong",[t._v("正在处理")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("thead",[e("tr",[e("th",{attrs:{scope:"col"}},[t._v("#")]),e("th",{attrs:{scope:"col"}},[t._v("住户")]),e("th",{attrs:{scope:"col"}},[t._v("事件类型")]),e("th",{attrs:{scope:"col"}},[t._v("状态")]),e("th",{attrs:{scope:"col"}},[t._v("创建时间")]),e("th",{attrs:{scope:"col"}},[t._v("处理时间")]),e("th",{attrs:{scope:"col"}},[t._v("操作")])])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("label",{attrs:{for:"finished-incident"}},[e("strong",[t._v("已完成")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("thead",[e("tr",[e("th",{attrs:{scope:"col"}},[t._v("#")]),e("th",{attrs:{scope:"col"}},[t._v("住户")]),e("th",{attrs:{scope:"col"}},[t._v("事件类型")]),e("th",{attrs:{scope:"col"}},[t._v("状态")]),e("th",{attrs:{scope:"col"}},[t._v("创建时间")]),e("th",{attrs:{scope:"col"}},[t._v("完成时间")]),e("th",{attrs:{scope:"col"}},[t._v("操作")])])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"incidentDetailLabel"}},[t._v("事件详情")]),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("关闭")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("thead",[e("tr",[e("th",{attrs:{scope:"col"}},[t._v("#")]),e("th",{attrs:{scope:"col"}},[t._v("ID")]),e("th",{attrs:{scope:"col"}},[t._v("姓名")]),e("th",{attrs:{scope:"col"}},[t._v("性别")]),e("th",{attrs:{scope:"col"}},[t._v("电话")]),e("th",{attrs:{scope:"col"}},[t._v("操作")])])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title"},[t._v("完成确认")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title"},[t._v("忽略确认")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"modal-body"},[e("p",[t._v("确认忽略该事件？该操作不可恢复")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"loginModalLabel"}},[t._v("会话超时")]),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],n=(e("7f7f"),e("1157")),o=e.n(n),r=e("4ed9"),c={name:"monitor",data:function(){return{pendingList:[],processingList:[],finishedList:[],incidentDetail:{},freeStaff:[],currentIncidentId:"",currentIndex:-1,comment:"",loading:!0,timer:0,hasClicked:!1,mapView:{zoom:14,markers:[],mapCenter:[113.874908,22.902537],lng:0,lat:0,plugin:[{pName:"Geolocation"},{pName:"OverView",isOpen:!0},{pName:"PolyEditor"}]}}},components:{LoginModal:r["a"]},computed:{isOnline:function(){return this.$store.getters.getOnline}},watch:{isOnline:function(){this.$store.getters.getOnline&&(o()("#loginModal").modal("hide"),this.getIncidentList())}},methods:{getIncidentList:function(){var t=this;this.checkSession().then(function(s){s?t.axios.post(t.getAPI()+"/security/monitor").then(function(s){if(t.pendingList=[],t.processingList=[],t.finishedList=[],s.data.length>0)for(var e=0;e<s.data.length;e++){var a={incidentId:s.data[e].incidentId,name:s.data[e].name,type:t.incidentTypeConverter(s.data[e].type),longitude:s.data[e].longitude,latitude:s.data[e].latitude,processStatus:t.processStatusConverter(s.data[e].processStatus),recordTime:t.dateTimeTrim(s.data[e].recordTime),staffId:s.data[e].staffId,processTime:t.dateTimeTrim(s.data[e].processTime),finishTime:t.dateTimeTrim(s.data[e].finishTime),comment:s.data[e].comment};0===s.data[e].processStatus?t.pendingList.push(a):1===s.data[e].processStatus?t.processingList.push(a):2!==s.data[e].processStatus&&3!==s.data[e].processStatus||t.finishedList.push(a)}else 200===s.data&&(console.log("获取事件列表失败"),console.log(s.data))},function(t){console.log("获取事件列表失败"),console.log(t.data)}):o()("#loginModal").modal("show")})},getFreeStaffs:function(){var t=this;this.loading=!0,this.checkSession().then(function(s){s?t.axios.get(t.getAPI()+"/staff/list").then(function(s){t.freeStaff=[];for(var e=0;e<s.data.length;e++){var a={id:s.data[e].staffId,name:s.data[e].name,sex:t.sexCheck(s.data[e].sex),phone:s.data[e].phone};1===s.data[e].status&&t.freeStaff.push(a)}t.loading=!1},function(t){console.log("获取空闲员工列表失败"),console.log(t)}):o()("#loginModal").modal("show")})},showDetail:function(t,s){var e=this;this.mapView.markers=[],this.checkSession().then(function(a){if(a){1===t?(e.incidentDetail=e.pendingList[s],e.incidentDetail.staffId="未安排",e.incidentDetail.processTime="未知",e.incidentDetail.finishTime="未知"):2===t?(e.incidentDetail=e.processingList[s],e.incidentDetail.finishTime="未知"):3===t&&(e.incidentDetail=e.finishedList[s]);var i=[];i.push(e.incidentDetail.longitude),i.push(e.incidentDetail.latitude),e.mapView.markers.push(i),e.mapView.mapCenter=i,o()("#incidentDetailModal").modal("show")}else o()("#loginModal").modal("show")})},toProcessOn:function(t,s){o()("#freeStaffModal").modal("show"),this.currentIncidentId=t,this.currentIndex=s,this.getFreeStaffs()},toProcessOff:function(){o()("#freeStaffModal").modal("hide"),this.currentIncidentId="",this.currentIndex=-1},toFinishOn:function(t,s){o()("#finishConfirmModal").modal("show"),this.currentIncidentId=t,this.currentIndex=s},toFinishOff:function(){o()("#finishConfirmModal").modal("hide"),this.currentIncidentId="",this.currentIndex=-1,this.comment=""},toIgnoreOn:function(t,s){o()("#ignoreConfirmModal").modal("show"),this.currentIncidentId=t,this.currentIndex=s},toIgnoreOff:function(){o()("#ignoreConfirmModal").modal("hide"),this.currentIncidentId="",this.currentIndex=-1},submitProcess:function(t,s){var e=this;this.hasClicked||(this.hasClicked=!0,this.checkSession().then(function(a){var i;a?(1===s?i={incidentId:e.currentIncidentId,processStatus:s,staffId:t}:2===s?i={incidentId:e.currentIncidentId,processStatus:s,staffId:t,comment:e.comment}:3===s&&(i={incidentId:e.currentIncidentId,processStatus:s}),e.axios.post(e.getAPI()+"/security/process-incident",i).then(function(a){if(100===a.data){if(console.log("事件处理操作成功"),1===s){var i=e.pendingList[e.currentIndex];i.processStatus="正在处理",i.staffId=t,i.processTime=e.$moment().format("YYYY-MM-DD HH:mm:ss"),e.processingList.unshift(i),e.pendingList.splice(e.currentIndex,1),e.toProcessOff()}else if(2===s){var n=e.processingList[e.currentIndex];n.processStatus="已完成",n.finishTime=e.$moment().format("YYYY-MM-DD HH:mm:ss"),n.comment=e.comment,e.finishedList.unshift(n),e.processingList.splice(e.currentIndex,1),e.toFinishOff()}else if(3===s){var o=e.pendingList[e.currentIndex];o.processStatus="已忽略",o.processTime=e.$moment().format("YYYY-MM-DD HH:mm:ss"),o.finishTime=e.$moment().format("YYYY-MM-DD HH:mm:ss"),o.staffId=e.$store.getters.getAdminId,e.finishedList.unshift(o),e.pendingList.splice(e.currentIndex,1),e.toIgnoreOff()}alert("事件处理操作成功")}else 200===a.data&&(console.log("事件处理失败"),alert("事件处理失败,请重试"))},function(t){console.log("post process failed"),console.log(t)})):o()("#loginModal").modal("show")}),this.hasClicked=!1)},incidentTypeConverter:function(t){return 0===t?"围栏之外":1===t?"接近围栏":2===t?"紧急求助":3===t?"异常离线":void 0},processStatusConverter:function(t){return 0===t?"待处理":1===t?"正在处理":2===t?"已完成":3===t?"已忽略":void 0},dateTimeTrim:function(t){return this.$moment(t).format("YYYY-MM-DD HH:mm:ss")},sexCheck:function(t){return"MALE"===t?"男":"FEMALE"===t?"女":"N/A"}},beforeMount:function(){this.getIncidentList()},created:function(){var t=this;this.timer=setInterval(function(){t.getIncidentList()},5e3)},destroyed:function(){clearInterval(this.timer)}},l=c,d=(e("9545"),e("2877")),u=Object(d["a"])(l,a,i,!1,null,"1d18aa92",null);s["default"]=u.exports},c3cf:function(t,s,e){}}]);
//# sourceMappingURL=chunk-c3c4bc80.ac138afc.js.map