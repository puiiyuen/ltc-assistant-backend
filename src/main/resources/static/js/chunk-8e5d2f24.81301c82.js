(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8e5d2f24"],{"24b3":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"info-table"}},[t._m(0),e("div",{attrs:{id:"function-bar"}},[e("div",{attrs:{id:"operation-bar"}},[e("button",{staticClass:"btn btn-success",on:{click:t.getAllStaffInfo}},[t._v("全部员工")]),e("button",{staticClass:"btn btn-primary",attrs:{"data-toggle":"modal","data-target":"#addStaffModal"}},[t._v("新增员工")])]),e("form",{staticClass:"form-inline my-2 my-lg-0",attrs:{id:"search-bar"},on:{submit:t.searchStaff}},[e("label",{staticStyle:{"padding-right":"15px"},attrs:{for:"search-input"}},[t._v("搜索员工:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchInput,expression:"searchInput"}],staticClass:"form-control mr-sm-2",attrs:{id:"search-input",type:"search",placeholder:"输入ID、姓名","aria-label":"Search",required:""},domProps:{value:t.searchInput},on:{input:function(a){a.target.composing||(t.searchInput=a.target.value)}}}),e("button",{staticClass:"btn btn-success my-2 my-sm-0",attrs:{type:"submit"}},[t._v("搜索")])])]),e("table",{staticClass:"table table-hover table-responsive-lg"},[t._m(1),e("tbody",[0===t.staffs.length?e("tr",{staticStyle:{"text-align":"center"}},[e("td",{attrs:{colspan:"7"}},[t._v("暂无员工")])]):t._e(),t._l(t.staffs,function(a,s){return e("tr",{attrs:{id:"main-table-tr","data-toggle":"tooltip",title:"点击查看详情"},on:{click:function(a){return t.getDetail(s)}}},[e("th",{attrs:{scope:"row"}},[t._v(t._s(s+1))]),t._l(a,function(a){return e("td",[t._v("\n        "+t._s(a)+"\n      ")])})],2)})],2)]),e("div",{staticClass:"modal fade",attrs:{id:"infoModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-xl modal-dialog-centered",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[t._m(2),e("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"modal-body",staticStyle:{"text-align":"center"}},[t._v("\n          "+t._s(t.loadingStatus)+"\n        ")]),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],staticClass:"modal-body",staticStyle:{"text-align":"center"}},[e("div",{attrs:{id:"staff-info"}},[e("table",{staticClass:"table table-bordered"},[e("tbody",[e("tr",[e("th",{attrs:{scope:"row"}},[t._v("ID:")]),e("td",[t._v(t._s(t.staffDetail.id))]),e("th",{attrs:{scope:"row"}},[t._v("姓名")]),e("td",[t._v(t._s(t.staffDetail.name))]),e("th",{attrs:{scope:"row"}},[t._v("性别")]),e("td",[t._v(t._s(t.staffDetail.sex))]),e("th",{attrs:{scope:"row"}},[t._v("出生年月")]),e("td",[t._v(t._s(t.staffDetail.dob))]),e("td",{attrs:{rowspan:"3"}},[e("img",{staticStyle:{width:"100px"},attrs:{src:t.staffDetail.photoUrl,alt:"照片"}})])]),e("tr",[e("th",{attrs:{scope:"row"}},[t._v("身份证号")]),e("td",[t._v(t._s(t.staffDetail.goverId))]),e("th",{attrs:{scope:"row"}},[t._v("电话")]),e("td",[t._v(t._s(t.staffDetail.phone))]),e("th",{attrs:{scope:"row"}},[t._v("邮箱")]),e("td",[t._v(t._s(t.staffDetail.email))]),e("th",{attrs:{scope:"row"}},[t._v("入职日期")]),e("td",[t._v(t._s(t.staffDetail.moveInDate))])]),e("tr",[e("th",{attrs:{scope:"row"}},[t._v("常用地址")]),e("td",{attrs:{colspan:"7"}},[t._v(t._s(t.staffDetail.address))])])])])]),e("div",{attrs:{id:"dateTime"}},[e("table",{staticClass:"table table-bordered"},[e("tbody",[e("tr",[e("th",{attrs:{scope:"row"}},[t._v("资料创建日期")]),e("td",[t._v(t._s(t.staffDetail.createDate))]),e("th",{attrs:{scope:"row"}},[t._v("资料更新日期")]),e("td",[t._v(t._s(t.staffDetail.updateDate))])])])])]),e("div",{staticClass:"row action-button"},[e("div",{staticClass:"col-4"},[e("button",{staticClass:"btn btn-primary btn-sm",attrs:{"data-dismiss":"modal"},on:{click:t.modifyStaffSwitchOn}},[t._v("修改资料")]),e("button",{staticClass:"btn btn-danger btn-sm",on:{click:t.destroyStaffSwitchOn}},[t._v("注销账户")])]),e("div",{staticClass:"col-4"}),e("div",{staticClass:"col-4"})])]),t._m(3)])])]),e("div",{staticClass:"modal fade",attrs:{id:"addStaffModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-xl modal-dialog-centered",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[t._m(4),e("div",{staticClass:"modal-body"},[e("form",{on:{submit:t.submitNewStaff,reset:t.onReset}},[t._m(5),e("div",{attrs:{id:"newStaffInfo"}},[e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-group col-3"},[e("label",{attrs:{for:"newStaffName"}},[t._v("姓名")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.newStaff.name,expression:"newStaff.name"}],staticClass:"form-control",class:{"is-invalid":t.formFormat.name},attrs:{type:"text",id:"newStaffName",placeholder:"姓名",required:""},domProps:{value:t.newStaff.name},on:{input:function(a){a.target.composing||t.$set(t.newStaff,"name",a.target.value)}}}),e("div",{staticClass:"invalid-feedback"},[t._v("\n                    名字长度不可超过10字符\n                  ")])]),e("div",{staticClass:"form-group col-3"},[e("label",{attrs:{for:"newStaffSex"}},[t._v("性别")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.newStaff.sex,expression:"newStaff.sex"}],staticClass:"form-control",class:{"is-invalid":t.formFormat.sex},attrs:{id:"newStaffSex",required:""},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){var a="_value"in t?t._value:t.value;return a});t.$set(t.newStaff,"sex",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"",selected:""}},[t._v("选择")]),e("option",{attrs:{value:"MALE"}},[t._v("男")]),e("option",{attrs:{value:"FEMALE"}},[t._v("女")])]),e("div",{staticClass:"invalid-feedback"},[t._v("\n                    请选择性别\n                  ")])]),e("div",{staticClass:"form-group col-3"},[e("label",{attrs:{for:"newStaffDob"}},[t._v("出生年月")]),e("datepicker",{attrs:{id:"newStaffDob",format:"yyyy-MM-dd",language:t.language.zh,placeholder:"选择日期",required:!0,"clear-button":!0,"bootstrap-styling":!0,typeable:!0,"input-class":{"is-invalid":t.formFormat.dob}},model:{value:t.newStaff.dob,callback:function(a){t.$set(t.newStaff,"dob",a)},expression:"newStaff.dob"}})],1),e("div",{staticClass:"form-group col-3"})]),e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-group col-3"},[e("label",{attrs:{for:"newStaffGovId"}},[t._v("身份证号码")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.newStaff.goverId,expression:"newStaff.goverId"}],staticClass:"form-control",class:{"is-invalid":t.formFormat.goverId},attrs:{type:"text",id:"newStaffGovId",placeholder:"身份证号码",required:""},domProps:{value:t.newStaff.goverId},on:{input:function(a){a.target.composing||t.$set(t.newStaff,"goverId",a.target.value)}}}),e("div",{staticClass:"invalid-feedback"},[t._v("\n                    身份证号码应为18位数字\n                  ")])]),e("div",{staticClass:"form-group col-3"},[e("label",{attrs:{for:"newStaffPhone"}},[t._v("电话")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.newStaff.phone,expression:"newStaff.phone"}],staticClass:"form-control",class:{"is-invalid":t.formFormat.phone},attrs:{type:"text",id:"newStaffPhone",placeholder:"电话号码",required:""},domProps:{value:t.newStaff.phone},on:{input:function(a){a.target.composing||t.$set(t.newStaff,"phone",a.target.value)}}}),e("div",{staticClass:"invalid-feedback"},[t._v("\n                    电话号码应为座机或11位手机号\n                  ")])]),e("div",{staticClass:"form-group col-3"},[e("label",{attrs:{for:"newStaffEmail"}},[t._v("邮箱")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.newStaff.email,expression:"newStaff.email"}],staticClass:"form-control",class:{"is-invalid":t.formFormat.email},attrs:{type:"email",id:"newStaffEmail",placeholder:"邮箱",required:""},domProps:{value:t.newStaff.email},on:{input:function(a){a.target.composing||t.$set(t.newStaff,"email",a.target.value)}}}),e("div",{staticClass:"invalid-feedback"},[t._v("\n                    邮箱格式不正确\n                  ")])]),e("div",{staticClass:"form-group col-3"},[e("label",{attrs:{for:"newStaffMoveInDate"}},[t._v("入职日期")]),e("datepicker",{attrs:{id:"newStaffMoveInDate",format:"yyyy-MM-dd",language:t.language.zh,placeholder:"选择日期",required:!0,"clear-button":!0,"bootstrap-styling":!0,typeable:!0,"input-class":{"is-invalid":t.formFormat.moveInDate}},model:{value:t.newStaff.moveInDate,callback:function(a){t.$set(t.newStaff,"moveInDate",a)},expression:"newStaff.moveInDate"}})],1)]),e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-group col-12"},[e("label",{attrs:{for:"newStaffAddress"}},[t._v("常用地址")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.newStaff.address,expression:"newStaff.address"}],staticClass:"form-control",class:{"is-invalid":t.formFormat.address},attrs:{type:"text",id:"newStaffAddress",placeholder:"常用地址",required:""},domProps:{value:t.newStaff.address},on:{input:function(a){a.target.composing||t.$set(t.newStaff,"address",a.target.value)}}}),e("div",{staticClass:"invalid-feedback"},[t._v("\n                    地址长度不可超过100个字符\n                  ")])])]),e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-group col-12"},[e("label",{attrs:{for:"newStaffPhoto"}},[t._v("添加照片")]),e("input",{attrs:{type:"file",id:"newStaffPhoto",required:""},on:{change:t.getFile}})])])]),e("div",[e("button",{staticClass:"btn btn-primary",class:{disabled:t.hasClicked},attrs:{type:"submit"}},[t._v("提交")]),e("button",{staticClass:"btn btn-danger",class:{disabled:t.hasClicked},attrs:{type:"reset"}},[t._v("重置")]),e("div",{staticClass:"status-info"},[t._v(t._s(t.uploadStatus))])])]),e("b-alert",{attrs:{show:t.dismissCountDown,dismissible:"",fade:"",variant:"success"},on:{dismissed:function(a){t.dismissCountDown=0},"dismiss-count-down":t.countDownChanged}},[t._v("\n            操作成功！窗口将在 "+t._s(t.dismissCountDown)+" 秒后关闭...\n          ")])],1),t._m(6)])])]),e("div",{staticClass:"modal fade",attrs:{id:"modifyStaffModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered modal-xl",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[t._m(7),e("div",{staticClass:"modal-body"},[e("form",{on:{submit:t.submitModStaff,reset:t.onReset}},[t._m(8),e("div",{attrs:{id:"modifyStaffInfo"}},[e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-group col-3"},[e("label",{attrs:{for:"modifyStaffName"}},[t._v("姓名")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.modifyStaff.name,expression:"modifyStaff.name"}],staticClass:"form-control",class:{"is-invalid":t.formFormat.name},attrs:{type:"text",id:"modifyStaffName",placeholder:"姓名",required:""},domProps:{value:t.modifyStaff.name},on:{input:function(a){a.target.composing||t.$set(t.modifyStaff,"name",a.target.value)}}}),e("div",{staticClass:"invalid-feedback"},[t._v("\n                    名字长度不可超过10字符\n                  ")])]),e("div",{staticClass:"form-group col-3"},[e("label",{attrs:{for:"modifyStaffSex"}},[t._v("性别")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.modifyStaff.sex,expression:"modifyStaff.sex"}],staticClass:"form-control",class:{"is-invalid":t.formFormat.sex},attrs:{id:"modifyStaffSex",required:""},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){var a="_value"in t?t._value:t.value;return a});t.$set(t.modifyStaff,"sex",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"",selected:""}},[t._v("选择")]),e("option",{attrs:{value:"MALE"}},[t._v("男")]),e("option",{attrs:{value:"FEMALE"}},[t._v("女")])]),e("div",{staticClass:"invalid-feedback"},[t._v("\n                    请选择性别\n                  ")])]),e("div",{staticClass:"form-group col-3"},[e("label",{attrs:{for:"modifyStaffDob"}},[t._v("出生年月")]),e("datepicker",{attrs:{id:"modifyStaffDob",format:"yyyy-MM-dd",language:t.language.zh,placeholder:"选择日期",required:!0,"clear-button":!0,"bootstrap-styling":!0,typeable:!0,"input-class":{"is-invalid":t.formFormat.dob}},model:{value:t.modifyStaff.dob,callback:function(a){t.$set(t.modifyStaff,"dob",a)},expression:"modifyStaff.dob"}})],1)]),e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-group col-3"},[e("label",{attrs:{for:"modifyStaffGovId"}},[t._v("身份证号码")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.modifyStaff.goverId,expression:"modifyStaff.goverId"}],staticClass:"form-control",class:{"is-invalid":t.formFormat.goverId},attrs:{type:"text",id:"modifyStaffGovId",placeholder:"身份证号码",required:""},domProps:{value:t.modifyStaff.goverId},on:{input:function(a){a.target.composing||t.$set(t.modifyStaff,"goverId",a.target.value)}}}),e("div",{staticClass:"invalid-feedback"},[t._v("\n                    身份证号码应为18位数字\n                  ")])]),e("div",{staticClass:"form-group col-3"},[e("label",{attrs:{for:"modifyStaffPhone"}},[t._v("电话")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.modifyStaff.phone,expression:"modifyStaff.phone"}],staticClass:"form-control",class:{"is-invalid":t.formFormat.phone},attrs:{type:"text",id:"modifyStaffPhone",placeholder:"电话号码"},domProps:{value:t.modifyStaff.phone},on:{input:function(a){a.target.composing||t.$set(t.modifyStaff,"phone",a.target.value)}}}),e("div",{staticClass:"invalid-feedback"},[t._v("\n                    电话号码应为座机或11位手机号\n                  ")])]),e("div",{staticClass:"form-group col-3"},[e("label",{attrs:{for:"modifyStaffEmail"}},[t._v("邮箱")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.modifyStaff.email,expression:"modifyStaff.email"}],staticClass:"form-control",class:{"is-invalid":t.formFormat.email},attrs:{type:"email",id:"modifyStaffEmail",placeholder:"邮箱"},domProps:{value:t.modifyStaff.email},on:{input:function(a){a.target.composing||t.$set(t.modifyStaff,"email",a.target.value)}}}),e("div",{staticClass:"invalid-feedback"},[t._v("\n                    邮箱格式不正确\n                  ")])]),e("div",{staticClass:"form-group col-3"},[e("label",{attrs:{for:"modifyStaffMoveInDate"}},[t._v("入职日期")]),e("datepicker",{attrs:{id:"modifyStaffMoveInDate",format:"yyyy-MM-dd",language:t.language.zh,placeholder:"选择日期",required:!0,"clear-button":!0,"bootstrap-styling":!0,typeable:!0,"input-class":{"is-invalid":t.formFormat.moveInDate}},model:{value:t.modifyStaff.moveInDate,callback:function(a){t.$set(t.modifyStaff,"moveInDate",a)},expression:"modifyStaff.moveInDate"}})],1)]),e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-group col-12"},[e("label",{attrs:{for:"modifyStaffAddress"}},[t._v("常用地址")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.modifyStaff.address,expression:"modifyStaff.address"}],staticClass:"form-control",class:{"is-invalid":t.formFormat.address},attrs:{type:"text",id:"modifyStaffAddress",placeholder:"常用地址",required:""},domProps:{value:t.modifyStaff.address},on:{input:function(a){a.target.composing||t.$set(t.modifyStaff,"address",a.target.value)}}}),e("div",{staticClass:"invalid-feedback"},[t._v("\n                    家庭地址长度不可超过100个字符\n                  ")])])]),e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-group col-12"},[e("label",{attrs:{for:"modifyStaffPhoto"}},[t._v("添加照片")]),e("input",{attrs:{type:"file",id:"modifyStaffPhoto"},on:{change:t.getModStaffPhoto}})])])]),e("div",[e("button",{staticClass:"btn btn-primary",class:{disabled:t.hasClicked},attrs:{type:"submit"}},[t._v("提交")]),e("button",{staticClass:"btn btn-danger",class:{disabled:t.hasClicked},attrs:{type:"reset"}},[t._v("重置")]),e("div",{staticClass:"status-info"},[t._v(t._s(t.uploadStatus))])])]),e("b-alert",{attrs:{show:t.dismissCountDown,dismissible:"",fade:"",variant:"success"},on:{dismissed:function(a){t.dismissCountDown=0},"dismiss-count-down":t.countDownChanged}},[t._v("\n            操作成功！窗口将在 "+t._s(t.dismissCountDown)+" 秒后关闭...\n          ")])],1),t._m(9)])])]),e("div",{staticClass:"modal",attrs:{tabindex:"-1",role:"dialog",id:"delConfirmModal"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered modal-sm",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[t._m(10),e("div",{staticClass:"modal-body"},[e("p",[t._v("确认注销用户？该操作不可恢复")]),e("div",{staticClass:"status-info"},[t._v(t._s(t.uploadStatus))])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-danger",class:{disabled:t.hasClicked},attrs:{type:"button"},on:{click:t.submitDesStaff}},[t._v("确定")]),e("button",{staticClass:"btn btn-secondary",class:{disabled:t.hasClicked},attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")])])])])]),e("div",{staticClass:"modal fade",attrs:{id:"loginModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-md",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[t._m(11),e("div",{staticClass:"modal-body",attrs:{id:"loginModalBody"}},[e("LoginModal")],1)])])])])},o=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"panel-title"}},[e("h5",[e("strong",[t._v("基本信息")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",{attrs:{scope:"col"}},[t._v("#")]),e("th",{attrs:{scope:"col"}},[t._v("ID")]),e("th",{attrs:{scope:"col"}},[t._v("姓名")]),e("th",{attrs:{scope:"col"}},[t._v("性别")]),e("th",{attrs:{scope:"col"}},[t._v("出生年月")]),e("th",{attrs:{scope:"col"}},[t._v("电话")]),e("th",{attrs:{scope:"col"}},[t._v("在岗状态")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"infoModalLabel"}},[t._v("详细信息")]),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("关闭")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"addStaffModalLabel"}},[t._v("添加员工")]),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("label",{attrs:{for:"newStaffInfo"}},[e("strong",[t._v("员工信息")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("关闭")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"modifyStaffModalLabel"}},[t._v("修改资料")]),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("label",{attrs:{for:"modifyStaffInfo"}},[e("strong",[t._v("员工信息")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("关闭")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title"},[t._v("注销确认")]),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"loginModalLabel"}},[t._v("会话超时")]),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],i=(e("b54a"),e("6b54"),e("7f7f"),e("1157")),d=e.n(i),n=e("4ed9"),l=e("ac5c"),f=e.n(l),r=e("ee9b"),m={name:"staffInfo",components:{Datepicker:f.a,LoginModal:n["a"]},data:function(){return{staffs:[],staffDetail:{},newStaff:{name:"",sex:"",dob:"",goverId:"",phone:"",email:"",address:"",photo:"",moveInDate:""},modifyStaff:{name:"",sex:"",dob:"",goverId:"",phone:"",email:"",address:"",photo:"",moveInDate:""},formFormat:{name:!1,sex:!1,dob:!1,goverId:!1,phone:!1,email:!1,address:!1,photo:!1,moveInDate:!1},loading:!0,loadingStatus:"加载中...",uploadStatus:"",dismissSecs:3,dismissCountDown:0,showDismissibleAlert:!1,hasClicked:!1,language:r,searchInput:""}},computed:{isOnline:function(){return this.$store.getters.getOnline}},watch:{isOnline:function(){this.$store.getters.getOnline&&(d()("#loginModal").modal("hide"),this.getAllStaffInfo())},dismissCountDown:function(){0===this.dismissCountDown&&(d()("#addStaffModal").modal("hide"),d()("#modifyStaffModal").modal("hide"),d()("#delConfirmModal").modal("hide"))}},methods:{getAllStaffInfo:function(){var t=this;this.checkSession().then(function(a){a?t.axios.get(t.getAPI()+"/staff/list").then(function(a){t.staffs=[];for(var e=0;e<a.data.length;e++){var s={id:a.data[e].staffId,name:a.data[e].name,sex:t.sexCheck(a.data[e].sex),dob:t.dateTrim(a.data[e].dob),phone:a.data[e].phone,status:t.statusConvert(a.data[e].status)};t.staffs.push(s)}},function(t){console.log("Get Failed"),console.log(t.data)}):d()("#loginModal").modal("show")})},getDetail:function(t){var a=this;this.checkSession().then(function(e){if(e){d()("#infoModal").modal("show");var s={staffId:a.staffs[t].id};a.axios.post(a.getAPI()+"/staff/detail",s).then(function(t){a.staffDetail={id:t.data.staffId,name:t.data.name,sex:a.sexCheck(t.data.sex),dob:a.dateTrim(t.data.dob),phone:t.data.phone,address:t.data.address,email:t.data.email,goverId:t.data.goverId,moveInDate:a.dateTrim(t.data.moveInDate),photoUrl:t.data.photoUrl,createDate:a.dateTimeTrim(t.data.createDate),updateDate:a.dateTimeTrim(t.data.updateDate)},a.loadingStatus="加载完成",a.loading=!1},function(t){"ECONNABORTED"===t.code&&-1!==t.toString().indexOf("timeout")?a.loadingStatus="加载超时，请重试":(console.log("post failed"),console.log(t))})}else d()("#loginModal").modal("show")})},getFile:function(t){this.newStaff.photo=t.target.files[0],"image"!==this.newStaff.photo.type.substring(0,5)?(alert("文件格式不正确，请重新选取"),this.newStaff.photo="",d()(t.target).val("")):this.newStaff.photo.size>512e3&&(alert("图像大于500k,请重新选取"),this.newStaff.photo="",d()(t.target).val(""))},getModStaffPhoto:function(t){this.modifyStaff.photo=t.target.files[0],"image"!==this.modifyStaff.photo.type.substring(0,5)?(alert("文件格式不正确，请重新选取"),this.modifyStaff.photo="",d()(t.target).val("")):this.modifyStaff.photo.size>512e3&&(alert("图像大于500k,请重新选取"),this.modifyStaff.photo="",d()(t.target).val(""))},submitNewStaff:function(t){var a=this;t.preventDefault(),this.hasClicked||this.checkFormat(this.newStaff)||(this.hasClicked=!0,this.checkSession().then(function(t){if(t){var e=new FormData;e.append("photo",a.newStaff.photo),a.uploadStatus="正在上传照片...",a.axios.post(a.getAPI()+"/staff/upload-photo",e).then(function(t){if(100===t.data.operationStatus){var e={name:a.newStaff.name,sex:a.newStaff.sex,dob:a.dateTrim(a.newStaff.dob),goverId:a.newStaff.goverId,photoUrl:t.data.link,phone:a.newStaff.phone,email:a.newStaff.email,address:a.newStaff.address,moveInDate:a.dateTrim(a.newStaff.moveInDate)};a.uploadStatus="正在上传资料...",a.axios.post(a.getAPI()+"/staff/add",e).then(function(t){console.log(t.data),100===t.data?(a.uploadStatus="",a.newStaff={},a.showAlert(),a.getAllStaffInfo()):200===t.data?a.uploadStatus="上传失败请重试":-999===t.data&&(a.uploadStatus="服务器错误，请稍后尝试")},function(t){console.log("post photo failed"),console.log(t.data)})}else 200===t.data?a.uploadStatus="上传失败请重试":-999===t.data&&(a.uploadStatus="服务器错误，请稍后尝试")},function(t){a.uploadStatus="上传失败请重试",console.log("post info failed"),console.log(t.data)})}else d()("#loginModal").modal("show")}),this.hasClicked=!1)},modifyStaffSwitchOn:function(){this.modifyStaff={},d()("#modifyStaffModal").modal("show"),this.modifyStaff.name=this.staffDetail.name,"男"===this.staffDetail.sex?this.modifyStaff.sex="MALE":"女"===this.staffDetail.sex&&(this.modifyStaff.sex="FEMALE"),this.modifyStaff.dob=this.staffDetail.dob,this.modifyStaff.goverId=this.staffDetail.goverId,this.modifyStaff.phone=this.staffDetail.phone,this.modifyStaff.email=this.staffDetail.email,this.modifyStaff.address=this.staffDetail.address,this.modifyStaff.moveInDate=this.staffDetail.moveInDate},submitModStaff:function(t){var a=this;t.preventDefault(),this.hasClicked||this.checkFormat(this.modifyStaff)||(this.hasClicked=!0,this.uploadStatus="正在上传资料...",this.checkSession().then(function(t){if(t)if(void 0===a.modifyStaff.photo){var e={staffId:a.staffDetail.id,name:a.modifyStaff.name,sex:a.modifyStaff.sex,dob:a.dateTrim(a.modifyStaff.dob),goverId:a.modifyStaff.goverId,phone:a.modifyStaff.phone,email:a.modifyStaff.email,address:a.modifyStaff.address,photoUrl:a.staffDetail.photoUrl,moveInDate:a.dateTrim(a.modifyStaff.moveInDate)};a.axios.post(a.getAPI()+"/staff/modify",e).then(function(t){100===t.data?(a.uploadStatus="",a.modifyStaff={},a.showAlert(),d()("#modifyStaffPhoto").val(""),a.getAllStaffInfo()):200===t.data?a.uploadStatus="上传失败请重试":-999===t.data&&(a.uploadStatus="服务器错误，请稍后尝试")},function(t){a.uploadStatus="网络连接失败",console.log("modify staff post failed"),console.log(t)})}else{var s=new FormData;s.append("photo",a.modifyStaff.photo),a.uploadStatus="正在上传照片...",a.axios.post(a.getAPI()+"/staff/upload-photo",s).then(function(t){var e={staffId:a.staffDetail.id,name:a.modifyStaff.name,sex:a.modifyStaff.sex,dob:a.dateTrim(a.modifyStaff.dob),goverId:a.modifyStaff.goverId,phone:a.modifyStaff.phone,email:a.modifyStaff.email,address:a.modifyStaff.address,photoUrl:t.data.link,moveInDate:a.dateTrim(a.modifyStaff.moveInDate)};a.axios.post(a.getAPI()+"/staff/modify",e).then(function(t){100===t.data?(a.uploadStatus="",a.modifyStaff={},a.showAlert(),a.getAllStaffInfo()):200===t.data?a.uploadStatus="上传失败请重试":-999===t.data&&(a.uploadStatus="服务器错误，请稍后重试")},function(t){a.uploadStatus="网络连接失败",console.log("modify staff post failed"),console.log(t)})},function(t){a.uploadStatus="网络连接失败",console.log("modify staff photo post failed"),console.log(t)})}else d()("#loginModal").modal("show")}),this.hasClicked=!1)},destroyStaffSwitchOn:function(){d()("#delConfirmModal").modal({backdrop:"static"})},submitDesStaff:function(){var t=this;this.hasClicked||(this.hasClicked=!0,this.checkSession().then(function(a){if(a){var e={staffId:t.staffDetail.id};t.axios.post(t.getAPI()+"/staff/delete",e).then(function(a){100===a.data?(t.uploadStatus="注销成功",t.showAlert(),d()("#infoModal").modal("hide"),t.getAllStaffInfo()):200===a.data?t.uploadStatus="注销失败，请稍后重试":-999===a.data&&(t.uploadStatus="服务器错误，请稍后尝试")},function(a){t.uploadStatus="网络连接错误",console.log("post destroy failed"),console.log(a)})}else d()("#loginModal").modal("show")}),this.hasClicked=!1)},searchStaff:function(t){var a=this;t.preventDefault(),this.checkSession().then(function(t){if(t){var e={search:a.searchInput};a.axios.post(a.getAPI()+"/staff/search",e).then(function(t){a.staffs=[];for(var e=0;e<t.data.length;e++){var s={id:t.data[e].staffId,name:t.data[e].name,sex:a.sexCheck(t.data[e].sex),dob:a.dateTrim(t.data[e].dob),phone:t.data[e].phone,status:a.statusConvert(t.data[e].status)};a.staffs.push(s)}},function(t){console.log("search post failed"),console.log(t.data)})}else d()("#loginModal").modal("show")})},onReset:function(t){t.preventDefault(),this.hasClicked||(this.uploadStatus="",this.newStaff.name="",this.newStaff.sex="",this.newStaff.dob="",this.newStaff.goverId="",this.newStaff.phone="",this.newStaff.email="",this.newStaff.address="",this.newStaff.photo="",this.newStaff.moveInDate="",d()("#newStaffPhoto").val(""))},sexCheck:function(t){return"MALE"===t?"男":"FEMALE"===t?"女":"N/A"},statusConvert:function(t){return 0===t?"下班":1===t?"空闲":2===t?"忙碌":"未知"},dateTrim:function(t){return this.$moment(t).format("YYYY-MM-DD")},dateTimeTrim:function(t){return this.$moment(t).format("YYYY-MM-DD HH:mm:ss")},countDownChanged:function(t){this.dismissCountDown=t},showAlert:function(){this.dismissCountDown=this.dismissSecs},checkFormat:function(t){this.formFormat.name=t.name.length>10,this.formFormat.sex=0===t.sex.length,this.formFormat.dob="Invalid date"===this.dateTrim(t.dob),this.formFormat.moveInDate="Invalid date"===this.dateTrim(t.moveInDate);var a=/(^\d{18}$)|(^\d{17}(\d|X|x)$)/;this.formFormat.goverId=!a.test(t.goverId);var e=/((\d{11})|^((\d{7,8})|(\d{4}|\d{3})-(\d{7,8})|(\d{4}|\d{3})-(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1})|(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1}))$)/;0===t.phone.length?this.formFormat.phone=!1:this.formFormat.phone=!e.test(t.phone);var s=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;return 0===t.email.length?this.formFormat.email=!1:this.formFormat.email=!s.test(t.email),this.formFormat.address=t.address.length>100,this.formFormat.name||this.formFormat.sex||this.formFormat.dob||this.formFormat.goverId||this.formFormat.phone||this.formFormat.email||this.formFormat.address||this.formFormat.moveInDate}},beforeMount:function(){this.getAllStaffInfo()}},c=m,u=(e("8edb"),e("2877")),v=Object(u["a"])(c,s,o,!1,null,"3d653e16",null);a["default"]=v.exports},"35f6":function(t,a,e){},"386b":function(t,a,e){var s=e("5ca1"),o=e("79e5"),i=e("be13"),d=/"/g,n=function(t,a,e,s){var o=String(i(t)),n="<"+a;return""!==e&&(n+=" "+e+'="'+String(s).replace(d,"&quot;")+'"'),n+">"+o+"</"+a+">"};t.exports=function(t,a){var e={};e[t]=a(n),s(s.P+s.F*o(function(){var a=""[t]('"');return a!==a.toLowerCase()||a.split('"').length>3}),"String",e)}},"8edb":function(t,a,e){"use strict";var s=e("35f6"),o=e.n(s);o.a},b54a:function(t,a,e){"use strict";e("386b")("link",function(t){return function(a){return t(this,"a","href",a)}})}}]);
//# sourceMappingURL=chunk-8e5d2f24.81301c82.js.map